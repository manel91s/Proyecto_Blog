{"version":3,"sources":["general.js","page-category.js","page-post.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.min.js","sourcesContent":["\r\nfunction initPage_onDomContentLoaded() {\r\n    var page = document.querySelector(\"[data-page]\").getAttribute('data-page');\r\n    route(page)\r\n}\r\n\r\n window.onload=function() {\r\n\r\n    var menu = false; \r\n\r\n    document.querySelector(\"#hamburguesa\").addEventListener(\"click\",menuBarra)    \r\n    //activar un listener para detectar el cambio de resolucion horizontal del objeto window\r\n    window.addEventListener(\"resize\",ocultarMenu)\r\n\r\n    function ocultarMenu() {\r\n        //Solo se ocultara cuando el ancho de la ventana del navegador supere el limite de la mediaquery\r\n        if(window.innerWidth >=800) {\r\n          document.querySelector(\"nav\").style.left=\"-130px\"\r\n          menu=false;\r\n          \r\n        }\r\n      }\r\n    \r\n      function menuBarra() {\r\n    \r\n        if(menu==false) {\r\n          //si menu oculto lo mostramos\r\n          document.querySelector(\"nav\").style.left=\"0px\"\r\n          menu=true;\r\n    \r\n        }else{\r\n          //si menu visible lo ocultamos\r\n          document.querySelector(\"nav\").style.left=\"-130px\"\r\n          menu=false;\r\n        }\r\n}\r\n }\r\n\r\nwindow.addEventListener('DOMContentLoaded', initPage_onDomContentLoaded);\r\n\r\nfunction route(page) {\r\n\r\n    switch(page){\r\n        \r\n\r\n        case 'page-user':\r\n            search();\r\n            break\r\n\r\n        case 'page-post':\r\n            search();\r\n             break;\r\n        case 'page-post-managament':\r\n            managamentPost();\r\n            break;\r\n        \r\n        case 'page-category':\r\n            searchCategory();\r\n            break;\r\n    }\r\n}\r\n\r\n\r\nfunction search() {\r\n    \r\n    document.querySelector(\"#form-search\").addEventListener('submit', function(e) {\r\n            e.preventDefault();\r\n        var search = document.querySelector(\"#search\").value;\r\n\r\n        if(search.trim()==\"\") {\r\n            var element = document.createElement(\"span\");\r\n            var content = document.createTextNode('El campo no puede estar vacio');\r\n            element.appendChild(content);\r\n            var div = document.querySelector(\"#div1\");\r\n            div.appendChild(element);\r\n            return;\r\n        }\r\n\r\n        let token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\r\n        e.preventDefault();\r\n        fetch(\"/search\", {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              \"Accept\": \"application/json, text-plain, */*\",\r\n              \"X-Requested-With\": \"XMLHttpRequest\",\r\n              \"X-CSRF-TOKEN\": token\r\n             },\r\n            method: 'POST',\r\n            credentials: \"same-origin\",\r\n            body: JSON.stringify({\r\n              name: search\r\n             \r\n            })\r\n           })\r\n            .then(function(response) {\r\n                if(response.ok) {\r\n                    return response.json()\r\n                } else {\r\n                    throw \"Error en la llamada Ajax\";\r\n                }\r\n            \r\n            })\r\n            .then(function(response) {\r\n                    document.querySelector(\"#div1\").innerHTML=\"\";\r\n                    console.log(response.search);\r\n                    if(response.search.length!=0) {\r\n                      \r\n                        showQuerySearch(response.search);\r\n                    }else{\r\n                        failedQuerySearch();\r\n                    }\r\n\r\n            })\r\n            .catch(function(err) {\r\n                console.log(err);\r\n            });\r\n              \r\n    });\r\n\r\n   \r\n}\r\n\r\nfunction failedQuerySearch() {\r\n\r\n    var section = document.querySelector(\"section\");\r\n\r\n    section.innerHTML = `<p>No se ha encontrado la pelicula</p>`;\r\n}\r\n\r\n\r\n\r\n\r\nfunction showQuerySearch(searchPost) {\r\n\r\n\r\n    var section = document.querySelector(\"section\");\r\n\r\n    //Borrar todos los elementos hijos de la seccion articulos\r\n    while(section.firstChild) {\r\n        section.removeChild(section.firstChild);\r\n    }\r\n\r\n    var resultSearch = \"\";\r\n\r\n    for(i=0; i<searchPost.length;i++) {\r\n        resultSearch+=\r\n        `<article class=\"padding-80px-bottom\">\r\n        <img src=\"http://www.blog-final.com.devel/images/${searchPost[i].image}\" alt=\"\">\r\n        <div>\r\n        <h1>${searchPost[i].title}</h1>\r\n        <p>Genero : <span class=\"text-bold\">${searchPost[i].name_category}</span></p>\r\n        <p>${searchPost[i].body.substring(0,400)}...</p>\r\n    \r\n        <p>Posteado por: <span class=\"text-bold\">${searchPost[i].name_user}</span></p>\r\n        \r\n        <a class=\"btn-read\" href=\"http://www.blog-final.com.devel/detailPost/${searchPost[i].id}\">Continuar Leyendo</a>\r\n        </div>\r\n        </article>`\r\n    }\r\n\r\n    section.innerHTML=resultSearch;\r\n\r\n\r\n\r\n  \r\n    \r\n    \r\n    \r\n} \r\n\r\n\r\n","function searchCategory() {\r\n\r\n    document.querySelector(\"#form-search\").addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n    var search = document.querySelector(\"#search\").value;\r\n\r\n    if(search.trim()==\"\") {\r\n        var element = document.createElement(\"span\");\r\n        var content = document.createTextNode('El campo no puede estar vacio');\r\n        element.appendChild(content);\r\n        var div = document.querySelector(\"#div1\");\r\n        div.appendChild(element);\r\n        return;\r\n    }\r\n\r\n    let token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\r\n    e.preventDefault();\r\n    fetch(\"/search\", {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Accept\": \"application/json, text-plain, */*\",\r\n          \"X-Requested-With\": \"XMLHttpRequest\",\r\n          \"X-CSRF-TOKEN\": token\r\n         },\r\n        method: 'POST',\r\n        credentials: \"same-origin\",\r\n        body: JSON.stringify({\r\n          name: search\r\n         \r\n        })\r\n       })\r\n        .then(function(response) {\r\n            if(response.ok) {\r\n                return response.json()\r\n            } else {\r\n                throw \"Error en la llamada Ajax\";\r\n            }\r\n        \r\n        })\r\n        .then(function(response) {\r\n                document.querySelector(\"#div1\").innerHTML=\"\";\r\n                console.log(response.search);\r\n                if(response.search.length!=0) {\r\n                  \r\n                    showQueryCategorySearch(response.search);\r\n                }else{\r\n                    failedQuerySearch();\r\n                }\r\n\r\n        })\r\n        .catch(function(err) {\r\n            console.log(err);\r\n        });\r\n          \r\n});\r\n\r\n\r\n}\r\n\r\nfunction showQueryCategorySearch(searchPost) {\r\n\r\n    var section = document.querySelector(\"section\");\r\n\r\n      //Borrar todos los elementos hijos de la seccion articulos\r\n      while(section.firstChild) {\r\n        section.removeChild(section.firstChild);\r\n    }\r\n\r\n    var resultSearch = \"\";\r\n    for(i=0; i<searchPost.length; i++) {\r\n\r\n        resultSearch+= \r\n                        `\r\n                        <div class=\"container-movie\">\r\n                        <div>\r\n                        <a href=\"http://www.blog-final.com.devel/detailPost/${searchPost[i].id}\"><img src=\"http://www.blog-final.com.devel/imagesCover/${searchPost[i].image}\" alt=\"\"></a>\r\n                        <p>${searchPost[i].title}</p>\r\n                        \r\n                        </div>\r\n                        <div>`\r\n\r\n    }\r\n    \r\n    section.innerHTML=resultSearch;\r\n\r\n  \r\n\r\n}","function managamentPost() {\r\n\r\n    let token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\r\n    fetch(\"/queryPost\", {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Accept\": \"application/json, text-plain, */*\",\r\n          \"X-Requested-With\": \"XMLHttpRequest\",\r\n          \"X-CSRF-TOKEN\": token\r\n         },\r\n        method: 'POST',\r\n        credentials: \"same-origin\",\r\n        body: JSON.stringify({\r\n        \r\n         \r\n        })\r\n       })\r\n        .then(function(response) {\r\n            if(response.ok) {\r\n                return response.json()\r\n            } else {\r\n                throw \"Error en la llamada Ajax\";\r\n            }\r\n        \r\n        })\r\n        .then(function(response) {\r\n                console.log(response);\r\n                showAllquery(response.allPosts.data)\r\n               \r\n\r\n        })\r\n        .catch(function(err) {\r\n            console.log(err);\r\n        });\r\n    \r\n}\r\n\r\n\r\nfunction showAllquery(posts) {\r\n\r\n    console.log(posts);\r\n\r\n    var table = `<tr><th>Titulo</th><th>Genero</th><th>Autor</th><th>Editar</th><th>Eliminar</th></tr>`;\r\n\r\n     for(i in posts) {\r\n        table+= `<tr>\r\n                    <input class=\"post_id\" type=\"hidden\" value=\"${posts[i].id}\">\r\n                    <td>${posts[i].title}</td>\r\n                    <td>${posts[i].name_category}</td>\r\n                    <td>${posts[i].name_user}</td>\r\n                    <td><a href=\"detaileditPost/${posts[i].id}\"><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i></a></td>\r\n                    <td><img id=\"delete\" name=\"${posts[i].id}\" src=\"./images/delete.png\" alt=\"\"></td>\r\n                    \r\n                 </tr>`\r\n    }\r\n\r\n    document.querySelector(\"#allPost\").innerHTML=table;\r\n\r\n    eventIdPost();\r\n\r\n}\r\n\r\nfunction eventIdPost() {\r\n\r\n    var deletePost = document.querySelectorAll(\"#delete\");\r\n    \r\n    let token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');  \r\n\r\n    for(i=0; i<deletePost.length; i++) {\r\n     \r\n        deletePost[i].addEventListener(\"click\", function() {\r\n        \r\n            var tr = this.closest(\"tr\");\r\n\r\n            var id = this.name;\r\n            fetch(\"/deletePosts\", {\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  \"Accept\": \"application/json, text-plain, */*\",\r\n                  \"X-Requested-With\": \"XMLHttpRequest\",\r\n                  \"X-CSRF-TOKEN\": token\r\n                 },\r\n                method: 'POST',\r\n                credentials: \"same-origin\",\r\n                body: JSON.stringify({\r\n\r\n                idPost: id\r\n\r\n                })\r\n               })\r\n                .then(function(response) {\r\n                    if(response.ok) {\r\n                        return response.json()\r\n                    } else {\r\n                        throw \"Error en la llamada Ajax\";\r\n                    }\r\n                \r\n                })\r\n                .then(function(response) {\r\n\r\n                    tr.parentNode.removeChild(tr);\r\n                    console.log(response);\r\n        \r\n                })\r\n                .catch(function(err) {\r\n                    console.log(err);\r\n                });\r\n  \r\n       });\r\n    }\r\n\r\n}\r\n\r\n"]}